{"version":3,"sources":["webpack://mesto/./src/scripts/components/FormValidator.js","webpack://mesto/./src/scripts/components/Section.js","webpack://mesto/./src/scripts/components/Card.js","webpack://mesto/./src/scripts/components/UserInfo.js","webpack://mesto/./src/scripts/components/Popup.js","webpack://mesto/./src/scripts/components/PopupWithForm.js","webpack://mesto/./src/scripts/components/PopupWithImage.js","webpack://mesto/./src/scripts/components/PopoupConfirm.js","webpack://mesto/./src/scripts/components/Api.js","webpack://mesto/./src/scripts/utils/constants.js","webpack://mesto/./src/scripts/utils/utils.js","webpack://mesto/./src/pages/index.js"],"names":["FormValidator","popupElements","popupForm","this","_form","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inputErrorClass","inputErrorClass","_inputError","inputError","_errorClass","errorClass","_inputs","Array","from","querySelectorAll","_errors","_button","setAttribute","classList","add","_hasInvalidInput","_disableSubmitButton","removeAttribute","remove","some","inputElement","validity","valid","element","_element","_errorElement","querySelector","id","_hideError","_showError","textContent","validationMessage","forEach","error","input","_toggleSubmit","addEventListener","_isValid","_setEventListeners","evt","preventDefault","Section","containerSelector","renderItems","_renderer","_container","items","item","prepend","Card","data","cardTemplate","userId","imagePopup","deleteCard","addCardLike","deleteCardLike","_data","_cardTemplate","_userId","_cardId","_id","_cardOwnerId","owner","_imagePopup","_getTemplate","_likeButton","_deleteButton","_likeCounter","_deleteCard","_addCardLike","_deleteCardLike","document","content","cloneNode","cardImage","alt","name","src","link","likes","length","_setIsLiked","_deleteButtonClick","_likeToggler","contains","then","res","catch","err","console","log","elem","card","cardId","UserInfo","profileName","profileJob","profileId","profileAvatar","_name","_job","_profileId","_profileAvatar","job","userInfo","about","avatar","Popup","popupElement","_popupElement","_popupOverlay","_popupCloseButton","_handleEscClose","bind","auxiliaryBlock","createElement","style","width","height","overflowY","visibility","body","appendChild","scrollWidth","offsetWidth","clientWidth","_calcScrollWidth","overflow","borderRight","removeEventListener","key","close","PopupWithForm","formSubmitCallBack","_formSubmitCallBack","_formSubmit","_submitButton","_getInputValues","value","reset","PopupWithImage","_image","_imageSubtitle","image","text","PopupConfirm","_submit","Api","_baseUrl","serverUrl","_token","token","ok","json","Promise","reject","status","statusText","fetch","headers","authorization","_requestResult","method","JSON","stringify","enableValidation","profileEditButton","profileAvatarEditButton","avatarEditPopup","cardDeletePopup","editProfilePopup","editProfilePopupForm","editProfileNameInput","editProfileJobInput","profileAddButton","addCardPopup","openPicturePopup","elementsList","spinner","addSpinner","append","removeSpinner","api","initialData","getUserInfo","getInitialCards","popupWithImage","setEventListeners","openImagePopup","target","closest","open","deleteCardPopup","createCard","createCardElement","section","addItem","editPopup","button","editProfile","setUserInfo","finally","avatarEdit","editAvatar","setUserAvatar","addNewCardPopup","placeName","placeLink","addNewCard","editPopupValidation","addPopupValidation","avatarEditPopopValidation","hideAllErrors","all","userData","cards","reverse"],"mappings":"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","file":"index.js","sourcesContent":["//* Класс валидации форм\r\nexport class FormValidator {\r\n  constructor(popupElements, popupForm) {\r\n    this._form = popupForm;\r\n    this._formSelector = popupElements.formSelector;\r\n    this._inputSelector = popupElements.inputSelector;\r\n    this._submitButtonSelector = popupElements.submitButtonSelector;\r\n    this._inputErrorClass = popupElements.inputErrorClass;\r\n    this._inputError = popupElements.inputError;\r\n    this._errorClass = popupElements.errorClass;\r\n    this._inputs = Array.from(this._form.querySelectorAll(this._inputSelector));\r\n    this._errors = Array.from(this._form.querySelectorAll(this._inputError));\r\n  }\r\n\r\n  //* Дизейбл кнопки сабмита\r\n  _disableSubmitButton() {\r\n    this._button.setAttribute(\"disabled\", true);\r\n    this._button.classList.add(\"popup__button_disabled\");\r\n  }\r\n\r\n  //* Переключение состояния кнопки\r\n  _toggleSubmit() {\r\n    if (this._hasInvalidInput()) {\r\n      this._disableSubmitButton();\r\n    } else {\r\n      this._button.removeAttribute(\"disabled\", true);\r\n      this._button.classList.remove(\"popup__button_disabled\");\r\n    }\r\n  }\r\n\r\n  //* Проверка массива инпутов на валидность\r\n  _hasInvalidInput() {\r\n    return this._inputs.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  }\r\n\r\n  //* Проверка элемента формы на валидность\r\n  _isValid(element) {\r\n    this._element = element;\r\n    this._errorElement = this._form.querySelector(`#${this._element.id}-error`);\r\n    !this._element.validity.valid ? this._showError() : this._hideError();\r\n  }\r\n\r\n  //* Отображение сообщения об ошибке\r\n  _showError() {\r\n    this._element.classList.add(this._inputErrorClass);\r\n    this._errorElement.classList.add(this._errorClass);\r\n    this._errorElement.textContent = this._element.validationMessage;\r\n  }\r\n\r\n  //* Скрытие сообщения об ошибке\r\n  _hideError() {\r\n    this._element.classList.remove(this._inputErrorClass);\r\n    this._errorElement.classList.remove(this._errorClass);\r\n    this._errorElement.textContent = \"\";\r\n  }\r\n\r\n  //* Скрытие ошибок и очистка полей\r\n  hideAllErrors() {\r\n    this._errors.forEach((error) => {\r\n      error.classList.remove(this._errorClass);\r\n      error.textContent = \"\";\r\n    });\r\n    this._inputs.forEach((input) => {\r\n      input.classList.remove(this._inputErrorClass);\r\n    });\r\n    this._disableSubmitButton();\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    this._button = this._form.querySelector(this._submitButtonSelector);\r\n    //* Деактивация кнопки при открытии попапа\r\n    this._toggleSubmit();\r\n    //* Деактивация кнопки после отправки\r\n    this._inputs.forEach((element) => {\r\n      element.addEventListener(\"input\", () => {\r\n        this._isValid(element);\r\n        this._toggleSubmit();\r\n      });\r\n    });\r\n  }\r\n\r\n  //* Валидация форм\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n    this._form.addEventListener(\r\n      \"submit\",\r\n      (evt) => evt.preventDefault(),\r\n      this._toggleSubmit()\r\n    );\r\n  }\r\n}\r\n","//* Класс размещения карточек на странице\r\nexport default class Section {\r\n  constructor({ renderItems }, containerSelector) {\r\n    this._renderer = renderItems;\r\n    this._container = containerSelector;\r\n  }\r\n\r\n  //* Рендер карточек\r\n  renderItems(items) {\r\n    items.forEach((item) => {\r\n      this._renderer(item);\r\n    });\r\n  }\r\n\r\n  //* Добавление карточки\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n}\r\n","//* Класс карточки\r\nexport class Card {\r\n  constructor(\r\n    data,\r\n    cardTemplate,\r\n    userId,\r\n    imagePopup,\r\n    deleteCard,\r\n    addCardLike,\r\n    deleteCardLike\r\n  ) {\r\n    this._data = data; //* полные данные о карточке\r\n    this._cardTemplate = cardTemplate; //* класс шаблона разметки\r\n    this._userId = userId; //* id профиля\r\n    this._cardId = data._id; //* id карточки\r\n    this._cardOwnerId = data.owner._id; //* id владельца карточки\r\n    this._imagePopup = imagePopup; //* функция открытия попапа с фото\r\n    this._element = this._getTemplate(); //* разметка карточки\r\n    this._likeButton = this._element.querySelector(\".elements__like-button\");\r\n    this._deleteButton = this._element.querySelector(\r\n      \".elements__delete-button\"\r\n    );\r\n    this._likeCounter = this._element.querySelector(\".elements__like-counter\");\r\n    this._deleteCard = deleteCard;\r\n    this._addCardLike = addCardLike;\r\n    this._deleteCardLike = deleteCardLike;\r\n  }\r\n\r\n  //* Получение шаблона разметки\r\n  _getTemplate() {\r\n    const cardElement = document\r\n      .querySelector(this._cardTemplate)\r\n      .content.querySelector(\".elements__list-item\")\r\n      .cloneNode(true);\r\n    return cardElement;\r\n  }\r\n\r\n  //* Создание карточки\r\n  createCardElement() {\r\n    this._setEventListeners();\r\n    const cardImage = this._element.querySelector(\".elements__picture\");\r\n    cardImage.alt = `${this._data.name}`;\r\n    cardImage.src = this._data.link;\r\n    this._element.querySelector(\r\n      \".elements__text\"\r\n    ).textContent = this._data.name;\r\n    this._element.querySelector(\r\n      \".elements__like-counter\"\r\n    ).textContent = this._data.likes.length;\r\n    this._setIsLiked();\r\n    return this._element;\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    if (this._cardOwnerId === this._userId) {\r\n      this._deleteButton.classList.add(\"elements__delete-button_active\");\r\n      this._deleteButton.addEventListener(\"click\", () =>\r\n        this._deleteButtonClick()\r\n      );\r\n    }\r\n\r\n    this._likeButton.addEventListener(\"click\", () => this._likeToggler());\r\n\r\n    this._element\r\n      .querySelector(\".elements__picture\")\r\n      .addEventListener(\"click\", this._imagePopup);\r\n  }\r\n\r\n  //* Переключение состояния лайка\r\n  _likeToggler() {\r\n    if (!this._likeButton.classList.contains(\"elements__like-button_active\")) {\r\n      this._addCardLike(this._cardId)\r\n        .then((res) => {\r\n          this._data = res;\r\n          this._likeCounter.textContent = res.likes.length;\r\n          this._likeButton.classList.add(\"heartbeat\");\r\n          this._likeButton.classList.add(\"elements__like-button_active\");\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      this._deleteCardLike(this._cardId)\r\n        .then((res) => {\r\n          this._data = res;\r\n          this._likeCounter.textContent = res.likes.length;\r\n          this._likeButton.classList.remove(\"heartbeat\");\r\n          this._likeButton.classList.remove(\"elements__like-button_active\");\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  _setIsLiked() {\r\n    //* Условие будет true если в массиве лайков найдется лайк с id пользователя\r\n    if (this._data.likes.some(elem => elem._id === this._userId)) {\r\n      this._likeButton.classList.add(\"elements__like-button_active\");\r\n      this._likeButton.classList.add(\"heartbeat\");\r\n    }\r\n  }\r\n\r\n  //* Удаление карточки\r\n  _deleteButtonClick() {\r\n    const data = {\r\n      card: this._element,\r\n      cardId: this._cardId,\r\n    };\r\n    this._deleteCard(data);\r\n  }\r\n}\r\n","//* Класс с пользовательскими данными\r\nexport default class UserInfo {\r\n  constructor({ profileName, profileJob, profileId, profileAvatar }) {\r\n    this._name = profileName;\r\n    this._job = profileJob;\r\n    this._profileId = profileId;\r\n    this._profileAvatar = profileAvatar;\r\n  }\r\n\r\n  getUserInfo() {\r\n    const userInfo = {\r\n      name: this._name.textContent,\r\n      job: this._job.textContent,\r\n    };\r\n    return userInfo;\r\n  }\r\n\r\n  setUserInfo(userInfo) {\r\n    this._name.textContent = userInfo.name;\r\n    this._job.textContent = userInfo.about;\r\n  }\r\n\r\n  setUserAvatar(data) {\r\n    this._profileAvatar.src = data.avatar;\r\n  }\r\n}\r\n","//* Родительский класс всех попапов\r\nexport default class Popup {\r\n  constructor(popupElement) {\r\n    this._popupElement = popupElement;\r\n    this._popupOverlay = this._popupElement.querySelector(\".popup__overlay\");\r\n    this._popupCloseButton = this._popupElement.querySelector(\r\n      \".popup__close-button\"\r\n    );\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n  }\r\n\r\n  //* Расчет ширины вертикального скролла\r\n  //* При открытии попапа блокируется прокрутка страницы и чтобы контент не дергался, странице добавляется граница справа шириной с полосу прокрутки\r\n  _calcScrollWidth() {\r\n    const auxiliaryBlock = document.createElement(\"div\");\r\n    auxiliaryBlock.style.width = \"50px\";\r\n    auxiliaryBlock.style.height = \"50px\";\r\n    auxiliaryBlock.style.overflowY = \"scroll\";\r\n    auxiliaryBlock.style.visibility = \"hidden\";\r\n\r\n    document.body.appendChild(auxiliaryBlock);\r\n    const scrollWidth = auxiliaryBlock.offsetWidth - auxiliaryBlock.clientWidth;\r\n    auxiliaryBlock.remove();\r\n\r\n    return scrollWidth;\r\n  }\r\n\r\n  //* Метод открытия попапа и блокировки скролла страницы\r\n  open() {\r\n    const scrollWidth = this._calcScrollWidth();\r\n    document.addEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.add(\"popup_opened\");\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    //* Добавление границы с шириной равной ширине скролла\r\n    document.body.style.borderRight = `${scrollWidth}px solid black`;\r\n  }\r\n\r\n  //* Метод закрытия попапа\r\n  close() {\r\n    document.removeEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.remove(\"popup_opened\");\r\n    document.body.style.overflow = \"\";\r\n    document.body.style.borderRight = \"none\";\r\n  }\r\n\r\n  //* Метод закрытия на ESC\r\n  _handleEscClose(evt) {\r\n    if (evt.key === \"Escape\") {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  //* Установка слушателей\r\n  setEventListeners() {\r\n    this._popupCloseButton.addEventListener(\"click\", () => {\r\n      this.close();\r\n    });\r\n    this._popupOverlay.addEventListener(\"click\", () => {\r\n      if (this._popupElement.classList.contains(\"popup_opened\")) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с формой\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._formSubmit = this._formSubmit.bind(this);\r\n    this._form = this._popupElement.querySelector(\".popup__form\");\r\n    this._inputs = Array.from(this._form.querySelectorAll(\".popup__input\"));\r\n    this._submitButton = this._form.querySelector(\".popup__button\");\r\n  }\r\n\r\n  //* Сабмит формы\r\n  _formSubmit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this._getInputValues(), this._submitButton);\r\n  }\r\n\r\n  //* Метод сбора данных со всех полей формы\r\n  _getInputValues() {\r\n    const data = {};\r\n    this._inputs.forEach((input) => {\r\n      data[input.name] = input.value;\r\n    });\r\n    return data;\r\n  }\r\n\r\n  //* Перезапись родительского метода закрытия попапа\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n\r\n  //* Перезапись родительского метода установки слушателей\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener(\"submit\", this._formSubmit);\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с картинкой\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupElement) {\r\n    super(popupElement);\r\n    this._image = this._popupElement.querySelector(\".popup__image\");\r\n    this._imageSubtitle = this._popupElement.querySelector(\r\n      \".popup__image-subtitle\"\r\n    );\r\n  }\r\n\r\n  //* Перезапись родительского метода\r\n  open(data) {\r\n    super.open();\r\n    this._image.src = data.image;\r\n    this._image.alt = data.text;\r\n    this._imageSubtitle.textContent = `${data.text}`;\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\nexport default class PopupConfirm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._form = this._popupElement.querySelector(\".popup__form\");\r\n    this._submit = this._submit.bind(this);\r\n  }\r\n\r\n  _submit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this.data);\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener(\"submit\", this._submit);\r\n  }\r\n}\r\n","//* Класс для взаимодействия с сервером\r\nexport default class Api {\r\n  constructor(data) {\r\n    this._baseUrl = data.serverUrl;\r\n    this._token = data.token;\r\n  }\r\n\r\n  //* Проверка статуса запроса\r\n  _requestResult(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(\r\n        `Что-то пошло не так: Ошибка ${res.status} - ${res.statusText}`\r\n      );\r\n    }\r\n  }\r\n\r\n  //* Запрос данных пользователя\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос изначальных карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}cards`, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  editAvatar(data) {\r\n    return fetch(`${this._baseUrl}users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: data.avatar,\r\n      }),\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос на редактирование данных пользователя\r\n  editProfile(data) {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.job,\r\n      }),\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос на добавление карточки\r\n  addNewCard(data) {\r\n    return fetch(`${this._baseUrl}cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      }),\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос на удаление карточки\r\n  deleteCard(data) {\r\n    return fetch(`${this._baseUrl}cards/${data}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос на добавление лайка карточке\r\n  addCardLike(data) {\r\n    return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n\r\n  //* Запрос на удаление лайка карточки\r\n  deleteCardLike(data) {\r\n    return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    }).then((res) => this._requestResult(res));\r\n  }\r\n}\r\n","//* Данные для валидации форм\r\nexport const enableValidation = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  inputError: \".popup__input-error\",\r\n  errorClass: \"popup__input-error_visible\",\r\n};\r\n\r\n//* Основные константы\r\nexport const profileName = document.querySelector(\".profile__name\");\r\nexport const profileJob = document.querySelector(\".profile__job\");\r\nexport const profileAvatar = document.querySelector(\".profile__avatar\");\r\n\r\nexport const profileEditButton = document.querySelector(\r\n  \".profile__edit-button\"\r\n);\r\nexport const profileAvatarEditButton = document.querySelector(\r\n  \".profile__avatar-edit-button\"\r\n);\r\nexport const avatarEditPopup = document.querySelector(\"#update\");\r\nexport const cardDeletePopup = document.querySelector(\"#confirm\");\r\nexport const editProfilePopup = document.querySelector(\"#editProfile\");\r\nexport const editProfilePopupForm = editProfilePopup.querySelector(\r\n  \".popup__form\"\r\n);\r\nexport const editProfileNameInput = editProfilePopupForm.querySelector(\r\n  \"#popup__name-input\"\r\n);\r\nexport const editProfileJobInput = editProfilePopupForm.querySelector(\r\n  \"#popup__job-input\"\r\n);\r\n\r\nexport const profileAddButton = document.querySelector(\".profile__add-button\");\r\nexport const addCardPopup = document.querySelector(\"#addCard\");\r\n\r\nexport const openPicturePopup = document.querySelector(\"#openPicture\");\r\n\r\nexport const elementsList = document.querySelector(\".elements__list\");\r\n\r\nexport const spinner = document.querySelector(\".spinner\");\r\n","import { spinner } from \"./constants.js\";\r\n\r\nexport function addSpinner(elem) {\r\n  elem.textContent = \"Сохранение...\";\r\n  elem.append(spinner);\r\n}\r\n\r\nexport function removeSpinner(elem) {\r\n  elem.textContent = \"Сохранить\";\r\n}\r\n","import \"./index.css\";\r\n\r\nimport { FormValidator } from \"../scripts/components/FormValidator.js\";\r\nimport Section from \"../scripts/components/Section.js\";\r\nimport { Card } from \"../scripts/components/Card.js\";\r\nimport UserInfo from \"../scripts/components/UserInfo.js\";\r\nimport PopupWithForm from \"../scripts/components/PopupWithForm.js\";\r\nimport PopupWithImage from \"../scripts/components/PopupWithImage.js\";\r\nimport PopupConfirm from \"../scripts/components/PopoupConfirm\";\r\nimport Api from \"../scripts/components/Api.js\";\r\nimport { addSpinner, removeSpinner } from \"../scripts/utils/utils.js\";\r\nimport {\r\n  editProfilePopup,\r\n  avatarEditPopup,\r\n  profileEditButton,\r\n  profileAvatarEditButton,\r\n  addCardPopup,\r\n  cardDeletePopup,\r\n  profileJob,\r\n  profileName,\r\n  profileAvatar,\r\n  elementsList,\r\n  openPicturePopup,\r\n  editProfileNameInput,\r\n  editProfileJobInput,\r\n  enableValidation,\r\n  profileAddButton,\r\n} from \"../scripts/utils/constants.js\";\r\n\r\nconst api = new Api({\r\n  serverUrl: \"https://mesto.nomoreparties.co/v1/cohort-19/\",\r\n  token: \"4fc24223-fbb6-4e5b-bedd-d51fcb2b9911\",\r\n});\r\n\r\n//* Переменные для id пользователя и лайков\r\nlet userId, addCardLike, deleteCardLike;\r\n\r\nconst initialData = [api.getUserInfo(), api.getInitialCards()];\r\n\r\n//* Попап с фото\r\nconst popupWithImage = new PopupWithImage(openPicturePopup);\r\npopupWithImage.setEventListeners();\r\n\r\n//* Открытие попапа с фото\r\nconst openImagePopup = (evt) => {\r\n  const data = {\r\n    image: evt.target.src,\r\n    text: evt.target\r\n      .closest(\".elements__list-item\")\r\n      .querySelector(\".elements__text\").textContent,\r\n  };\r\n  popupWithImage.open(data);\r\n};\r\n\r\nconst deleteCard = (data) => {\r\n  deleteCardPopup.data = data;\r\n  deleteCardPopup.open();\r\n};\r\n\r\n//* Создание карточки\r\nconst createCard = (data) => {\r\n  const card = new Card(\r\n    data,\r\n    \".cardTemplate\",\r\n    userId,\r\n    openImagePopup,\r\n    deleteCard,\r\n    (addCardLike = (data) => {\r\n      return api.addCardLike(data);\r\n    }),\r\n    (deleteCardLike = (data) => {\r\n      return api.deleteCardLike(data);\r\n    })\r\n  );\r\n  const cardElement = card.createCardElement(data);\r\n  return cardElement;\r\n};\r\n\r\n//* Попап удаления карточки\r\nconst deleteCardPopup = new PopupConfirm(cardDeletePopup, {\r\n  formSubmitCallBack: (data) => {\r\n    api\r\n      .deleteCard(data.cardId)\r\n      .then(() => {\r\n        data.card.remove();\r\n        deleteCardPopup.close();\r\n      })\r\n      .catch((err) => console.log(err));\r\n  },\r\n});\r\ndeleteCardPopup.setEventListeners();\r\n\r\n//* Генерация карточек\r\nconst section = new Section(\r\n  {\r\n    renderItems: (data) => {\r\n      section.addItem(createCard(data));\r\n    },\r\n  },\r\n  elementsList\r\n);\r\n\r\n//* Попап редактирования профиля\r\nconst userInfo = new UserInfo({ profileName, profileJob, profileAvatar });\r\n\r\nconst editPopup = new PopupWithForm(editProfilePopup, {\r\n  formSubmitCallBack: (data, button) => {\r\n    addSpinner(button);\r\n    api\r\n      .editProfile(data)\r\n      .then((res) => {\r\n        userInfo.setUserInfo(res);\r\n        editPopup.close();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        removeSpinner(button);\r\n      });\r\n  },\r\n});\r\neditPopup.setEventListeners();\r\n\r\n//* Попап редактирования аватарки\r\nconst avatarEdit = new PopupWithForm(avatarEditPopup, {\r\n  formSubmitCallBack: (data, button) => {\r\n    addSpinner(button);\r\n    api\r\n      .editAvatar(data)\r\n      .then((res) => {\r\n        userInfo.setUserAvatar(res);\r\n        avatarEdit.close();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        removeSpinner(button);\r\n      });\r\n  },\r\n});\r\navatarEdit.setEventListeners();\r\n\r\n//* Попап добавления карточки\r\nconst addNewCardPopup = new PopupWithForm(addCardPopup, {\r\n  formSubmitCallBack: (data, button) => {\r\n    addSpinner(button);\r\n    const item = {\r\n      name: data.placeName,\r\n      link: data.placeLink,\r\n    };\r\n    api\r\n      .addNewCard(item)\r\n      .then((res) => {\r\n        section.addItem(createCard(res), true);\r\n        addNewCardPopup.close();\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        removeSpinner(button);\r\n      });\r\n  },\r\n});\r\naddNewCardPopup.setEventListeners();\r\n\r\n//* Создание классов валидации\r\nconst editPopupValidation = new FormValidator(\r\n  enableValidation,\r\n  editProfilePopup\r\n);\r\n\r\nconst addPopupValidation = new FormValidator(\r\n  enableValidation, \r\n  addCardPopup\r\n);\r\n\r\nconst avatarEditPopopValidation = new FormValidator(\r\n  enableValidation,\r\n  avatarEditPopup\r\n);\r\n\r\n//* Активация валидации\r\neditPopupValidation.enableValidation();\r\naddPopupValidation.enableValidation();\r\navatarEditPopopValidation.enableValidation();\r\n\r\n//* Установка слушателей\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  const data = userInfo.getUserInfo();\r\n  editProfileNameInput.value = data.name;\r\n  editProfileJobInput.value = data.job;\r\n  editPopupValidation.hideAllErrors();\r\n  editPopup.open();\r\n  profileEditButton.blur();\r\n});\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  addNewCardPopup.open();\r\n  profileAddButton.blur();\r\n  addPopupValidation.hideAllErrors();\r\n});\r\nprofileAvatarEditButton.addEventListener(\"click\", () => {\r\n  avatarEdit.open();\r\n  profileAvatarEditButton.blur();\r\n  avatarEditPopopValidation.hideAllErrors();\r\n});\r\n\r\n//* Запрос данных сервера для превой отрисовки страницы\r\nPromise.all(initialData)\r\n  .then(([userData, cards]) => {\r\n    userId = userData._id;\r\n    userInfo.setUserInfo(userData);\r\n    userInfo.setUserAvatar(userData);\r\n    section.renderItems(cards.reverse());\r\n  })\r\n  .catch((err) => console.log(err));\r\n"],"sourceRoot":""}