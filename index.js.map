{"version":3,"sources":["webpack://mesto/./src/scripts/components/FormValidator.js","webpack://mesto/./src/scripts/components/Section.js","webpack://mesto/./src/scripts/components/Card.js","webpack://mesto/./src/scripts/components/UserInfo.js","webpack://mesto/./src/scripts/components/Popup.js","webpack://mesto/./src/scripts/components/PopupWithForm.js","webpack://mesto/./src/scripts/components/PopupWithImage.js","webpack://mesto/./src/scripts/components/PopoupConfirm.js","webpack://mesto/./src/scripts/components/Api.js","webpack://mesto/./src/scripts/utils/constants.js","webpack://mesto/./src/pages/index.js"],"names":["FormValidator","popupElements","popupForm","this","_form","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inputErrorClass","inputErrorClass","_inputError","inputError","_errorClass","errorClass","_inputs","Array","from","querySelectorAll","_errors","_button","setAttribute","classList","add","_hasInvalidInput","_disableSubmitButton","removeAttribute","remove","some","inputElement","validity","valid","element","_element","_errorElement","querySelector","id","_hideError","_showError","textContent","validationMessage","forEach","error","input","_toggleSubmit","addEventListener","_isValid","_setEventListeners","evt","preventDefault","Section","containerSelector","renderItems","_renderer","_container","items","item","prepend","Card","data","cardSelector","handleCardClick","_data","_cardSelector","_handleCardClick","_getTemplate","_likeButton","_deleteButton","document","content","cloneNode","cardImage","alt","name","src","link","_deleteCard","_likeToggler","toggle","UserInfo","profileName","profileJob","profileId","profileAvatar","_name","_job","_profileId","_profileAvatar","job","userInfo","about","avatar","Popup","popupElement","_popupElement","_popupOverlay","_popupCloseButton","_handleEscClose","bind","auxiliaryBlock","createElement","style","width","height","overflowY","visibility","body","appendChild","scrollWidth","offsetWidth","clientWidth","_calcScrollWidth","overflow","borderRight","removeEventListener","key","close","contains","PopupWithForm","formSubmitCallBack","_formSubmitCallBack","_formSubmit","_submitButton","_getInputValues","value","reset","PopupWithImage","_image","_imageSubtitle","image","text","PopupConfirm","_submit","Api","_baseUrl","serverUrl","_token","token","res","ok","json","Promise","reject","status","statusText","fetch","headers","authorization","then","_requestResult","method","JSON","stringify","enableValidation","profileEditButton","profileAvatarEditButton","avatarEditPopup","cardDeletePopup","editProfilePopup","editProfilePopupForm","editProfileNameInput","editProfileJobInput","profileAddButton","addCardPopup","openPicturePopup","elementsList","window","api","all","getUserInfo","getInitialCards","userData","_id","setUserInfo","setUserAvatar","section","catch","err","console","log","popupWithImage","setEventListeners","openImagePopup","target","closest","open","createCard","createCardElement","popupDeleteImage","deleteCard","addItem","editPopup","button","editProfile","finally","avatarEdit","editAvatar","addNewCardPopup","placeName","placeLink","editPopupValidation","addPopupValidation","avatarEditPopopValidation","hideAllErrors"],"mappings":"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","file":"index.js","sourcesContent":["//* Класс валидации форм\r\nexport class FormValidator {\r\n  constructor(popupElements, popupForm) {\r\n    this._form = popupForm;\r\n    this._formSelector = popupElements.formSelector;\r\n    this._inputSelector = popupElements.inputSelector;\r\n    this._submitButtonSelector = popupElements.submitButtonSelector;\r\n    this._inputErrorClass = popupElements.inputErrorClass;\r\n    this._inputError = popupElements.inputError;\r\n    this._errorClass = popupElements.errorClass;\r\n    this._inputs = Array.from(this._form.querySelectorAll(this._inputSelector));\r\n    this._errors = Array.from(this._form.querySelectorAll(this._inputError));\r\n  }\r\n\r\n  //* Дизейбл кнопки сабмита\r\n  _disableSubmitButton() {\r\n    this._button.setAttribute(\"disabled\", true);\r\n    this._button.classList.add(\"popup__button_disabled\");\r\n  }\r\n\r\n  //* Переключение состояния кнопки\r\n  _toggleSubmit() {\r\n    if (this._hasInvalidInput()) {\r\n      this._disableSubmitButton();\r\n    } else {\r\n      this._button.removeAttribute(\"disabled\", true);\r\n      this._button.classList.remove(\"popup__button_disabled\");\r\n    }\r\n  }\r\n\r\n  //* Проверка массива инпутов на валидность\r\n  _hasInvalidInput() {\r\n    return this._inputs.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  }\r\n\r\n  //* Проверка элемента формы на валидность\r\n  _isValid(element) {\r\n    this._element = element;\r\n    this._errorElement = this._form.querySelector(`#${this._element.id}-error`);\r\n    !this._element.validity.valid ? this._showError() : this._hideError();\r\n  }\r\n\r\n  //* Отображение сообщения об ошибке\r\n  _showError() {\r\n    this._element.classList.add(this._inputErrorClass);\r\n    this._errorElement.classList.add(this._errorClass);\r\n    this._errorElement.textContent = this._element.validationMessage;\r\n  }\r\n\r\n  //* Скрытие сообщения об ошибке\r\n  _hideError() {\r\n    this._element.classList.remove(this._inputErrorClass);\r\n    this._errorElement.classList.remove(this._errorClass);\r\n    this._errorElement.textContent = \"\";\r\n  }\r\n\r\n  //* Скрытие ошибок и очистка полей\r\n  hideAllErrors() {\r\n    this._errors.forEach((error) => {\r\n      error.classList.remove(this._errorClass);\r\n      error.textContent = \"\";\r\n    });\r\n    this._inputs.forEach((input) => {\r\n      input.classList.remove(this._inputErrorClass);\r\n    });\r\n    this._disableSubmitButton();\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    this._button = this._form.querySelector(this._submitButtonSelector);\r\n    //* Деактивация кнопки при открытии попапа\r\n    this._toggleSubmit();\r\n    //* Деактивация кнопки после отправки\r\n    this._inputs.forEach((element) => {\r\n      element.addEventListener(\"input\", () => {\r\n        this._isValid(element);\r\n        this._toggleSubmit();\r\n      });\r\n    });\r\n  }\r\n\r\n  //* Валидация форм\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n    this._form.addEventListener(\r\n      \"submit\",\r\n      (evt) => evt.preventDefault(),\r\n      this._toggleSubmit()\r\n    );\r\n  }\r\n}\r\n","//* Класс размещения карточек на странице\r\nexport default class Section {\r\n  constructor({ renderItems }, containerSelector) {\r\n    this._renderer = renderItems;\r\n    this._container = containerSelector;\r\n  }\r\n\r\n  //* Рендер карточек\r\n  renderItems(items) {\r\n    items.forEach((item) => {\r\n      this._renderer(item);\r\n    });\r\n  }\r\n\r\n  //* Добавление карточки\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n}\r\n","//* Класс карточки\r\nexport class Card {\r\n  constructor(data, cardSelector, handleCardClick) {\r\n    this._data = data;\r\n    this._cardSelector = cardSelector;\r\n    this._handleCardClick = handleCardClick;\r\n    this._element = this._getTemplate();\r\n    this._likeButton = this._element.querySelector(\".elements__like-button\");\r\n    this._deleteButton = this._element.querySelector(\r\n      \".elements__delete-button\"\r\n    );\r\n  }\r\n\r\n  //* Получение шаблона разметки\r\n  _getTemplate() {\r\n    const cardElement = document\r\n      .querySelector(this._cardSelector)\r\n      .content.querySelector(\".elements__list-item\")\r\n      .cloneNode(true);\r\n    return cardElement;\r\n  }\r\n\r\n  //* Создание карточки\r\n  createCardElement() {\r\n    this._setEventListeners();\r\n    const cardImage = this._element.querySelector(\".elements__picture\");\r\n    cardImage.alt = `${this._data.name} by Brent Olson`;\r\n    cardImage.src = this._data.link;\r\n    this._element.querySelector(\r\n      \".elements__text\"\r\n    ).textContent = this._data.name;\r\n\r\n    return this._element;\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    this._deleteButton.addEventListener(\"click\", () => this._deleteCard());\r\n\r\n    this._likeButton.addEventListener(\"click\", () => this._likeToggler());\r\n\r\n    this._element\r\n      .querySelector(\".elements__picture\")\r\n      .addEventListener(\"click\", this._handleCardClick);\r\n  }\r\n\r\n  //* Переключение состояния лайка\r\n  _likeToggler() {\r\n    this._likeButton.classList.toggle(\"heartbeat\");\r\n    this._likeButton.classList.toggle(\"elements__like-button_active\");\r\n  }\r\n\r\n  //* Удаление карточки\r\n  _deleteCard() {\r\n    this._element.remove();\r\n    this._element = null;\r\n  }\r\n}\r\n","//* Класс с пользовательскими данными\r\nexport default class UserInfo {\r\n  constructor({ profileName, profileJob, profileId, profileAvatar }) {\r\n    this._name = profileName;\r\n    this._job = profileJob;\r\n    this._profileId = profileId;\r\n    this._profileAvatar = profileAvatar;\r\n  }\r\n                       \r\n  getUserInfo() {\r\n    const userInfo = {\r\n      name: this._name.textContent,\r\n      job: this._job.textContent,\r\n    };\r\n    return userInfo;\r\n  }\r\n\r\n  setUserInfo(userInfo) {\r\n    this._name.textContent = userInfo.name;\r\n    this._job.textContent = userInfo.about;\r\n  }\r\n\r\n  setUserAvatar(data) {\r\n    this._profileAvatar.src = data.avatar;\r\n  }\r\n}\r\n","//* Родительский класс всех попапов\r\nexport default class Popup {\r\n  constructor(popupElement) {\r\n    this._popupElement = popupElement;\r\n    this._popupOverlay = this._popupElement.querySelector(\".popup__overlay\");\r\n    this._popupCloseButton = this._popupElement.querySelector(\r\n      \".popup__close-button\"\r\n    );\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n  }\r\n\r\n  //* Расчет ширины вертикального скролла\r\n  //* При открытии попапа блокируется прокрутка страницы и чтобы контент не дергался, странице добавляется граница справа шириной с полосу прокрутки\r\n  _calcScrollWidth() {\r\n    const auxiliaryBlock = document.createElement(\"div\");\r\n    auxiliaryBlock.style.width = \"50px\";\r\n    auxiliaryBlock.style.height = \"50px\";\r\n    auxiliaryBlock.style.overflowY = \"scroll\";\r\n    auxiliaryBlock.style.visibility = \"hidden\";\r\n\r\n    document.body.appendChild(auxiliaryBlock);\r\n    const scrollWidth = auxiliaryBlock.offsetWidth - auxiliaryBlock.clientWidth;\r\n    auxiliaryBlock.remove();\r\n\r\n    return scrollWidth;\r\n  }\r\n\r\n  //* Метод открытия попапа и блокировки скролла страницы\r\n  open() {\r\n    const scrollWidth = this._calcScrollWidth();\r\n    document.addEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.add(\"popup_opened\");\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    //* Добавление границы с шириной равной ширине скролла\r\n    document.body.style.borderRight = `${scrollWidth}px solid black`;\r\n  }\r\n\r\n  //* Метод закрытия попапа\r\n  close() {\r\n    document.removeEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.remove(\"popup_opened\");\r\n    document.body.style.overflow = \"\";\r\n    document.body.style.borderRight = \"none\";\r\n  }\r\n\r\n  //* Метод закрытия на ESC\r\n  _handleEscClose(evt) {\r\n    if (evt.key === \"Escape\") {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  //* Установка слушателей\r\n  setEventListeners() {\r\n    this._popupCloseButton.addEventListener(\"click\", () => {\r\n      this.close();\r\n    });\r\n    this._popupOverlay.addEventListener(\"click\", () => {\r\n      if (this._popupElement.classList.contains(\"popup_opened\")) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с формой\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._formSubmit = this._formSubmit.bind(this);\r\n    this._form = this._popupElement.querySelector(\".popup__form\");\r\n    this._inputs = Array.from(this._form.querySelectorAll(\".popup__input\"));\r\n    this._submitButton = this._form.querySelector(\".popup__button\");\r\n  }\r\n\r\n  //* Сабмит формы\r\n  _formSubmit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this._getInputValues(), this._submitButton);\r\n  }\r\n\r\n  //* Метод сбора данных со всех полей формы\r\n  _getInputValues() {\r\n    const data = {};\r\n    this._inputs.forEach(input => {\r\n      data[input.name] = input.value;\r\n    });\r\n    return data;\r\n  }\r\n\r\n  //* Перезапись родительского метода закрытия попапа\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n\r\n  //* Перезапись родительского метода установки слушателей\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener(\"submit\", this._formSubmit);\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с картинкой\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupElement) {\r\n    super(popupElement);\r\n    this._image = this._popupElement.querySelector(\".popup__image\");\r\n    this._imageSubtitle = this._popupElement.querySelector(\r\n      \".popup__image-subtitle\"\r\n    );\r\n  }\r\n\r\n  //* Перезапись родительского метода\r\n  open(data) {\r\n    super.open();\r\n    this._image.src = data.image;\r\n    this._image.alt = data.text;\r\n    this._imageSubtitle.textContent = `${data.text}`;\r\n  }\r\n}\r\n","import Popup from './Popup.js'\r\n\r\nexport default class PopupConfirm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._form = this._popupElement.querySelector('.popup__form');\r\n    this._submit = this._submit.bind(this);\r\n  }\r\n\r\n  _submit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this.data);\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', this._submit);\r\n  }\r\n}","//* Класс для взаимодействия с сервером\r\nexport default class Api {\r\n  constructor(data) {\r\n    this._baseUrl = data.serverUrl;\r\n    this._token = data.token;\r\n  }\r\n\r\n  //* Проверка статуса запроса\r\n  _requestResult(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Что-то пошло не так: Ошибка ${res.status} - ${res.statusText}`);\r\n    }\r\n  }\r\n\r\n  //* Запрос данных пользователя\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос изначальных карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  editAvatar(data) {\r\n    return fetch(`${this._baseUrl}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: data.avatar\r\n      })\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на редактирование данных пользователя\r\n  editProfile(data) {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.job\r\n      })\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на добавление карточки\r\n  // addNewCard(data) {\r\n  //   return fetch(`${this._baseUrl}cards`, {\r\n  //     method: 'POST',\r\n  //     headers: {\r\n  //       authorization: this._token,\r\n  //       'Content-Type': 'applocation/json'\r\n  //     },\r\n  //     body: JSON.stringify({\r\n  //       name: data.name,\r\n  //       link: data.link\r\n  //     })\r\n  //   })\r\n  //   .then((res) => this._requestResult(res))\r\n  // }\r\n\r\n  //* Запрос на удаление карточки\r\n  // deleteCard(data) {\r\n  //   return fetch(`${this._baseUrl}cards/${data}`, {\r\n  //     method: 'DELETE',\r\n  //     headers: {\r\n  //       authorization: this._token\r\n  //     }\r\n  //   })\r\n  //   .then((res) => this._requestResult(res))\r\n  // }\r\n\r\n  //* Запрос на добавление лайка карточке\r\n  // addCardLike(data) {\r\n  //   return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n  //     method: 'PUT',\r\n  //     headers: {\r\n  //       authorization: this._token\r\n  //     }\r\n  //   })\r\n  //   .then((res) => this._requestResult(res))\r\n  // }\r\n\r\n  //* Запрос на удаление лайка карточки\r\n  // deleteCardLike(data) {\r\n  //   return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n  //     method: 'DELETE', \r\n  //     header: {\r\n  //       authorization: this._token\r\n  //     }\r\n  //   })\r\n  //   .then((res) => this._requestResult(res))\r\n  // }\r\n}","// //* Импорт изображений для Webpack\r\n// import morning from '../../images/cards/camping.jpg';\r\n// import house from '../../images/cards/house.jpg';\r\n// import syracuse from '../../images/cards/syracuse.jpg';\r\n// import canyon from '../../images/cards/united-states.jpg';\r\n// import mountainsFog from '../../images/cards/mountains.jpg';\r\n// import iceland from '../../images/cards/iceland.jpg';\r\n// import zion from '../../images/cards/zion-national-park.jpg';\r\n// import grandCanyon from '../../images/cards/grandc.jpg';\r\n// import moab from '../../images/cards/moab.jpg';\r\n\r\n\r\n// //* Изначальные карточки\r\n// export const сards = [\r\n//   {\r\n//     name: \"Утро в палатках\",\r\n//     link: morning,\r\n//   },\r\n//   {\r\n//     name: \"Одинокий домик\",\r\n//     link: house,\r\n//   },\r\n//   {\r\n//     name: \"Дорога в Сиракьюс, США\",\r\n//     link: syracuse,\r\n//   },\r\n//   {\r\n//     name: \"Каньон, США\",\r\n//     link: canyon,\r\n//   },\r\n//   {\r\n//     name: \"Горный туман\",\r\n//     link: mountainsFog,\r\n//   },\r\n//   {\r\n//     name: \"Айслэнд\",\r\n//     link: iceland,\r\n//   },\r\n//   {\r\n//     name: \"Национальный парк Сион, США\",\r\n//     link: zion,\r\n//   },\r\n//   {\r\n//     name: \"Национальный парк Гранд Каньон, США\",\r\n//     link: grandCanyon,\r\n//   },\r\n//   {\r\n//     name: \"Моаб, США\",\r\n//     link: moab,\r\n//   },\r\n// ];\r\n\r\n//* Разворачиваем массив с карточками для отображения по порядку через prepend\r\n// export const initialCards = сards.reverse();\r\n\r\n//* Данные для валидации форм\r\nexport const enableValidation = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  inputError: \".popup__input-error\",\r\n  errorClass: \"popup__input-error_visible\",\r\n};\r\n\r\n//* Основные константы\r\nexport const profileName = document.querySelector(\".profile__name\");\r\nexport const profileJob = document.querySelector(\".profile__job\");\r\nexport const profileAvatar = document.querySelector(\".profile__avatar\");\r\n\r\nexport const profileEditButton = document.querySelector(\r\n  \".profile__edit-button\"\r\n);\r\nexport const profileAvatarEditButton = document.querySelector(\".profile__avatar-edit-button\");\r\nexport const avatarEditPopup = document.querySelector(\"#update\");\r\nexport const cardDeletePopup = document.querySelector(\"#confirm\");\r\nexport const editProfilePopup = document.querySelector(\"#editProfile\");\r\nexport const editProfilePopupForm = editProfilePopup.querySelector(\r\n  \".popup__form\"\r\n);\r\nexport const editProfileNameInput = editProfilePopupForm.querySelector(\r\n  \"#popup__name-input\"\r\n);\r\nexport const editProfileJobInput = editProfilePopupForm.querySelector(\r\n  \"#popup__job-input\"\r\n);\r\n\r\nexport const profileAddButton = document.querySelector(\".profile__add-button\");\r\nexport const addCardPopup = document.querySelector(\"#addCard\");\r\n\r\nexport const openPicturePopup = document.querySelector(\"#openPicture\");\r\n\r\nexport const elementsList = document.querySelector(\".elements__list\");\r\n","import \"./index.css\";\r\n\r\nimport { FormValidator } from \"../scripts/components/FormValidator.js\";\r\nimport Section from \"../scripts/components/Section.js\";\r\nimport { Card } from \"../scripts/components/Card.js\";\r\nimport UserInfo from \"../scripts/components/UserInfo.js\";\r\nimport PopupWithForm from \"../scripts/components/PopupWithForm.js\";\r\nimport PopupWithImage from \"../scripts/components/PopupWithImage.js\";\r\nimport PopupConfirm from \"../scripts/components/PopoupConfirm\";\r\nimport Api from \"../scripts/components/Api.js\";\r\nimport {\r\n  // initialCards as items,\r\n  editProfilePopup,\r\n  avatarEditPopup,\r\n  profileEditButton,\r\n  profileAvatarEditButton,\r\n  addCardPopup,\r\n  cardDeletePopup,\r\n  profileJob,\r\n  profileName,\r\n  profileAvatar,\r\n  elementsList,\r\n  openPicturePopup,\r\n  editProfileNameInput,\r\n  editProfileJobInput,\r\n  enableValidation,\r\n  profileAddButton,\r\n} from \"../scripts/utils/constants.js\";\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  const api = new Api({\r\n    serverUrl: \"https://mesto.nomoreparties.co/v1/cohort-19/\",\r\n    token: \"4fc24223-fbb6-4e5b-bedd-d51fcb2b9911\",\r\n  });\r\n\r\n  //* Переменная с id пользователя\r\n  let userId;\r\n\r\n  //* Запрос данных сервера для превой отрисовки страницы\r\n  Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n    .then((res) => {\r\n      // console.log(res);\r\n      const userData = res[0]; //* Объект с данными пользователя\r\n      // console.log(userData);\r\n      userId = userData._id;\r\n      userInfo.setUserInfo(userData);\r\n      userInfo.setUserAvatar(userData);\r\n      section.renderItems(res[1]);\r\n    })\r\n    .catch((err) => console.log(err));\r\n\r\n  //* Попап с фото\r\n  const popupWithImage = new PopupWithImage(openPicturePopup);\r\n  popupWithImage.setEventListeners();\r\n\r\n  //* Открытие попапа с фото\r\n  const openImagePopup = (evt) => {\r\n    const data = {\r\n      image: evt.target.src,\r\n      text: evt.target\r\n        .closest(\".elements__list-item\")\r\n        .querySelector(\".elements__text\").textContent,\r\n    };\r\n    popupWithImage.open(data);\r\n  };\r\n\r\n  //* Создание карточки\r\n  const createCard = (data) => {\r\n    const card = new Card(data, \".cardTemplate\", openImagePopup);\r\n    const cardElement = card.createCardElement(data);\r\n    return cardElement;\r\n  };\r\n\r\n  //! Попап удаления карточки\r\n  const popupDeleteImage = new PopupConfirm(cardDeletePopup, {\r\n    formSubmitCallBack: (data) => {\r\n      api\r\n        .deleteCard(data._id)\r\n        .then(() => {\r\n          data.item.remove();\r\n          popupDeleteImage.close();\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  });\r\n  popupDeleteImage.setEventListeners();\r\n\r\n  //* Генерация карточек\r\n  const section = new Section(\r\n    {\r\n      renderItems: (data) => {\r\n        section.addItem(createCard(data));\r\n      },\r\n    },\r\n    elementsList\r\n  );\r\n  // section.renderItems(items);\r\n\r\n  //* Попап редактирования профиля\r\n  const userInfo = new UserInfo({ profileName, profileJob, profileAvatar });\r\n\r\n  const editPopup = new PopupWithForm(editProfilePopup, {\r\n    formSubmitCallBack: (data, button) => {\r\n      button.textContent = \"Сохранение...\";\r\n      api\r\n        .editProfile(data)\r\n        .then((res) => {\r\n          userInfo.setUserInfo(res);\r\n          editPopup.close();\r\n        })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          button.textContent = \"Сохранить\";\r\n        });\r\n    },\r\n  });\r\n  editPopup.setEventListeners();\r\n\r\n  //* Попап редактирования аватарки\r\n  const avatarEdit = new PopupWithForm(avatarEditPopup, {\r\n    formSubmitCallBack: (data, button) => {\r\n      button.textContent = 'Сохранение...';\r\n      api\r\n        .editAvatar(data)\r\n        .then((res) => {\r\n          userInfo.setUserAvatar(res);\r\n          avatarEdit.close();\r\n        })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          button.textContent = 'Сохранить';\r\n        })\r\n    }\r\n  });\r\n  avatarEdit.setEventListeners();\r\n\r\n  //* Попап добавления карточки\r\n  const addNewCardPopup = new PopupWithForm(addCardPopup, {\r\n    formSubmitCallBack: (data) => {\r\n      const item = {\r\n        name: data.placeName,\r\n        link: data.placeLink,\r\n      };\r\n      section.addItem(createCard(item), true);\r\n      addNewCardPopup.close();\r\n    },\r\n  });\r\n  addNewCardPopup.setEventListeners();\r\n\r\n  //* Создание классов валидации\r\n  const editPopupValidation = new FormValidator(\r\n      enableValidation,\r\n      editProfilePopup\r\n    ),\r\n    addPopupValidation = new FormValidator(enableValidation, addCardPopup),\r\n    avatarEditPopopValidation = new FormValidator(enableValidation, avatarEditPopup);\r\n\r\n  //* Активация валидации\r\n  editPopupValidation.enableValidation();\r\n  addPopupValidation.enableValidation();\r\n  avatarEditPopopValidation.enableValidation();\r\n\r\n  //* Установка слушателей\r\n  profileEditButton.addEventListener(\"click\", () => {\r\n    const data = userInfo.getUserInfo();\r\n    editProfileNameInput.value = data.name;\r\n    editProfileJobInput.value = data.job;\r\n    editPopupValidation.hideAllErrors();\r\n    editPopup.open();\r\n    profileEditButton.blur();\r\n  });\r\n  profileAddButton.addEventListener(\"click\", () => {\r\n    addNewCardPopup.open();\r\n    profileAddButton.blur();\r\n    addPopupValidation.hideAllErrors();\r\n  });\r\n  profileAvatarEditButton.addEventListener(\"click\", () => {\r\n    avatarEdit.open();\r\n    profileAvatarEditButton.blur();\r\n    avatarEditPopopValidation.hideAllErrors();\r\n  })\r\n});\r\n"],"sourceRoot":""}