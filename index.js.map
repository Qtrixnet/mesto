{"version":3,"sources":["webpack://mesto/./src/scripts/components/FormValidator.js","webpack://mesto/./src/scripts/components/Section.js","webpack://mesto/./src/scripts/components/Card.js","webpack://mesto/./src/scripts/components/UserInfo.js","webpack://mesto/./src/scripts/components/Popup.js","webpack://mesto/./src/scripts/components/PopupWithForm.js","webpack://mesto/./src/scripts/components/PopupWithImage.js","webpack://mesto/./src/scripts/components/PopoupConfirm.js","webpack://mesto/./src/scripts/components/Api.js","webpack://mesto/./src/scripts/utils/constants.js","webpack://mesto/./src/pages/index.js"],"names":["FormValidator","popupElements","popupForm","this","_form","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inputErrorClass","inputErrorClass","_inputError","inputError","_errorClass","errorClass","_inputs","Array","from","querySelectorAll","_errors","_button","setAttribute","classList","add","_hasInvalidInput","_disableSubmitButton","removeAttribute","remove","some","inputElement","validity","valid","element","_element","_errorElement","querySelector","id","_hideError","_showError","textContent","validationMessage","forEach","error","input","_toggleSubmit","addEventListener","_isValid","_setEventListeners","evt","preventDefault","Section","containerSelector","renderItems","_renderer","_container","items","item","prepend","Card","data","cardTemplate","userId","imagePopup","deleteCard","addCardLike","deleteCardLike","_data","_cardTemplate","_userId","_cardId","_id","_cardOwnerId","owner","_imagePopup","_getTemplate","_likeButton","_deleteButton","_likeCounter","_deleteCard","_addCardLike","_deleteCardLike","document","content","cloneNode","cardImage","alt","name","src","link","likes","length","_setIsLiked","_deleteButtonClick","_likeToggler","toggle","contains","then","res","likeCounter","catch","err","console","log","like","card","cardId","UserInfo","profileName","profileJob","profileId","profileAvatar","_name","_job","_profileId","_profileAvatar","job","userInfo","about","avatar","Popup","popupElement","_popupElement","_popupOverlay","_popupCloseButton","_handleEscClose","bind","auxiliaryBlock","createElement","style","width","height","overflowY","visibility","body","appendChild","scrollWidth","offsetWidth","clientWidth","_calcScrollWidth","overflow","borderRight","removeEventListener","key","close","PopupWithForm","formSubmitCallBack","_formSubmitCallBack","_formSubmit","_submitButton","_getInputValues","value","reset","PopupWithImage","_image","_imageSubtitle","image","text","PopupConfirm","_submit","Api","_baseUrl","serverUrl","_token","token","ok","json","Promise","reject","status","statusText","fetch","headers","authorization","_requestResult","method","JSON","stringify","enableValidation","profileEditButton","profileAvatarEditButton","avatarEditPopup","cardDeletePopup","editProfilePopup","editProfilePopupForm","editProfileNameInput","editProfileJobInput","profileAddButton","addCardPopup","openPicturePopup","elementsList","spinner","window","api","initialData","getUserInfo","getInitialCards","all","userData","setUserInfo","setUserAvatar","section","reverse","popupWithImage","setEventListeners","openImagePopup","target","closest","open","deleteCardPopup","createCard","createCardElement","addItem","editPopup","button","append","editProfile","finally","avatarEdit","editAvatar","addNewCardPopup","placeName","placeLink","addNewCard","editPopupValidation","addPopupValidation","avatarEditPopopValidation","hideAllErrors"],"mappings":"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","file":"index.js","sourcesContent":["//* Класс валидации форм\r\nexport class FormValidator {\r\n  constructor(popupElements, popupForm) {\r\n    this._form = popupForm;\r\n    this._formSelector = popupElements.formSelector;\r\n    this._inputSelector = popupElements.inputSelector;\r\n    this._submitButtonSelector = popupElements.submitButtonSelector;\r\n    this._inputErrorClass = popupElements.inputErrorClass;\r\n    this._inputError = popupElements.inputError;\r\n    this._errorClass = popupElements.errorClass;\r\n    this._inputs = Array.from(this._form.querySelectorAll(this._inputSelector));\r\n    this._errors = Array.from(this._form.querySelectorAll(this._inputError));\r\n  }\r\n\r\n  //* Дизейбл кнопки сабмита\r\n  _disableSubmitButton() {\r\n    this._button.setAttribute(\"disabled\", true);\r\n    this._button.classList.add(\"popup__button_disabled\");\r\n  }\r\n\r\n  //* Переключение состояния кнопки\r\n  _toggleSubmit() {\r\n    if (this._hasInvalidInput()) {\r\n      this._disableSubmitButton();\r\n    } else {\r\n      this._button.removeAttribute(\"disabled\", true);\r\n      this._button.classList.remove(\"popup__button_disabled\");\r\n    }\r\n  }\r\n\r\n  //* Проверка массива инпутов на валидность\r\n  _hasInvalidInput() {\r\n    return this._inputs.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    });\r\n  }\r\n\r\n  //* Проверка элемента формы на валидность\r\n  _isValid(element) {\r\n    this._element = element;\r\n    this._errorElement = this._form.querySelector(`#${this._element.id}-error`);\r\n    !this._element.validity.valid ? this._showError() : this._hideError();\r\n  }\r\n\r\n  //* Отображение сообщения об ошибке\r\n  _showError() {\r\n    this._element.classList.add(this._inputErrorClass);\r\n    this._errorElement.classList.add(this._errorClass);\r\n    this._errorElement.textContent = this._element.validationMessage;\r\n  }\r\n\r\n  //* Скрытие сообщения об ошибке\r\n  _hideError() {\r\n    this._element.classList.remove(this._inputErrorClass);\r\n    this._errorElement.classList.remove(this._errorClass);\r\n    this._errorElement.textContent = \"\";\r\n  }\r\n\r\n  //* Скрытие ошибок и очистка полей\r\n  hideAllErrors() {\r\n    this._errors.forEach((error) => {\r\n      error.classList.remove(this._errorClass);\r\n      error.textContent = \"\";\r\n    });\r\n    this._inputs.forEach((input) => {\r\n      input.classList.remove(this._inputErrorClass);\r\n    });\r\n    this._disableSubmitButton();\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    this._button = this._form.querySelector(this._submitButtonSelector);\r\n    //* Деактивация кнопки при открытии попапа\r\n    this._toggleSubmit();\r\n    //* Деактивация кнопки после отправки\r\n    this._inputs.forEach((element) => {\r\n      element.addEventListener(\"input\", () => {\r\n        this._isValid(element);\r\n        this._toggleSubmit();\r\n      });\r\n    });\r\n  }\r\n\r\n  //* Валидация форм\r\n  enableValidation() {\r\n    this._setEventListeners();\r\n    this._form.addEventListener(\r\n      \"submit\",\r\n      (evt) => evt.preventDefault(),\r\n      this._toggleSubmit()\r\n    );\r\n  }\r\n}\r\n","//* Класс размещения карточек на странице\r\nexport default class Section {\r\n  constructor({ renderItems }, containerSelector) {\r\n    this._renderer = renderItems;\r\n    this._container = containerSelector;\r\n  }\r\n\r\n  //* Рендер карточек\r\n  renderItems(items) {\r\n    items.forEach((item) => {\r\n      this._renderer(item);\r\n    });\r\n  }\r\n\r\n  //* Добавление карточки\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n}\r\n","//* Класс карточки\r\nexport class Card {\r\n  constructor(\r\n    data,\r\n    cardTemplate,\r\n    userId,\r\n    imagePopup,\r\n    deleteCard,\r\n    addCardLike,\r\n    deleteCardLike\r\n  ) {\r\n    this._data = data; //* полные данные о карточке\r\n    this._cardTemplate = cardTemplate; //* класс шаблона разметки\r\n    this._userId = userId; //* id профиля\r\n    this._cardId = data._id; //* id карточки\r\n    this._cardOwnerId = data.owner._id; //* id владельца карточки\r\n    this._imagePopup = imagePopup; //* функция открытия попапа с фото\r\n    this._element = this._getTemplate(); //* разметка карточки\r\n    this._likeButton = this._element.querySelector(\".elements__like-button\");\r\n    this._deleteButton = this._element.querySelector(\r\n      \".elements__delete-button\"\r\n    );\r\n    this._likeCounter = this._element.querySelector(\".elements__like-counter\");\r\n    this._deleteCard = deleteCard;\r\n    this._addCardLike = addCardLike;\r\n    this._deleteCardLike = deleteCardLike;\r\n    // console.log(data);\r\n  }\r\n\r\n  //* Получение шаблона разметки\r\n  _getTemplate() {\r\n    const cardElement = document\r\n      .querySelector(this._cardTemplate)\r\n      .content.querySelector(\".elements__list-item\")\r\n      .cloneNode(true);\r\n    return cardElement;\r\n  }\r\n\r\n  //* Создание карточки\r\n  createCardElement() {\r\n    this._setEventListeners();\r\n    const cardImage = this._element.querySelector(\".elements__picture\");\r\n    cardImage.alt = `${this._data.name}`;\r\n    cardImage.src = this._data.link;\r\n    this._element.querySelector(\r\n      \".elements__text\"\r\n    ).textContent = this._data.name;\r\n    this._element.querySelector(\r\n      \".elements__like-counter\"\r\n    ).textContent = this._data.likes.length;\r\n    this._setIsLiked();\r\n    return this._element;\r\n  }\r\n\r\n  //* Установка слушателей\r\n  _setEventListeners() {\r\n    if (this._cardOwnerId === this._userId) {\r\n      this._deleteButton.classList.add(\"elements__delete-button_active\");\r\n      this._deleteButton.addEventListener(\"click\", () =>\r\n        this._deleteButtonClick()\r\n      );\r\n    }\r\n\r\n    this._likeButton.addEventListener(\"click\", () => this._likeToggler());\r\n\r\n    this._element\r\n      .querySelector(\".elements__picture\")\r\n      .addEventListener(\"click\", this._imagePopup);\r\n  }\r\n\r\n  //* Переключение состояния лайка\r\n  _likeToggler() {\r\n    this._likeButton.classList.toggle(\"heartbeat\");\r\n    this._likeButton.classList.toggle(\"elements__like-button_active\");\r\n\r\n    if (this._likeButton.classList.contains(\"elements__like-button_active\")) {\r\n      this._likeCounter.textContent = this._data.likes.length + 1;\r\n      this._addCardLike(this._cardId)\r\n        .then((res) => {\r\n          this._data = res;\r\n          this.likeCounter.textContent = this._data.likes.length;\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      this._likeCounter.textContent = this._data.likes.length - 1;\r\n      this._deleteCardLike(this._cardId)\r\n        .then((res) => {\r\n          this._data = res;\r\n          this.likeCounter.textContent = this._data.likes.length;\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  _setIsLiked() {\r\n    this._data.likes.forEach((like) => {\r\n      if (like._id == this._userId) {\r\n        this._likeButton.classList.toggle(\"elements__like-button_active\");\r\n      }\r\n    });\r\n  }\r\n\r\n  //* Удаление карточки\r\n  _deleteButtonClick() {\r\n    const data = {\r\n      card: this._element,\r\n      cardId: this._cardId,\r\n    };\r\n    this._deleteCard(data);\r\n  }\r\n}\r\n","//* Класс с пользовательскими данными\r\nexport default class UserInfo {\r\n  constructor({ profileName, profileJob, profileId, profileAvatar }) {\r\n    this._name = profileName;\r\n    this._job = profileJob;\r\n    this._profileId = profileId;\r\n    this._profileAvatar = profileAvatar;\r\n  }\r\n                       \r\n  getUserInfo() {\r\n    const userInfo = {\r\n      name: this._name.textContent,\r\n      job: this._job.textContent,\r\n    };\r\n    return userInfo;\r\n  }\r\n\r\n  setUserInfo(userInfo) {\r\n    this._name.textContent = userInfo.name;\r\n    this._job.textContent = userInfo.about;\r\n  }\r\n\r\n  setUserAvatar(data) {\r\n    this._profileAvatar.src = data.avatar;\r\n  }\r\n}\r\n","//* Родительский класс всех попапов\r\nexport default class Popup {\r\n  constructor(popupElement) {\r\n    this._popupElement = popupElement;\r\n    this._popupOverlay = this._popupElement.querySelector(\".popup__overlay\");\r\n    this._popupCloseButton = this._popupElement.querySelector(\r\n      \".popup__close-button\"\r\n    );\r\n    this._handleEscClose = this._handleEscClose.bind(this);\r\n  }\r\n\r\n  //* Расчет ширины вертикального скролла\r\n  //* При открытии попапа блокируется прокрутка страницы и чтобы контент не дергался, странице добавляется граница справа шириной с полосу прокрутки\r\n  _calcScrollWidth() {\r\n    const auxiliaryBlock = document.createElement(\"div\");\r\n    auxiliaryBlock.style.width = \"50px\";\r\n    auxiliaryBlock.style.height = \"50px\";\r\n    auxiliaryBlock.style.overflowY = \"scroll\";\r\n    auxiliaryBlock.style.visibility = \"hidden\";\r\n\r\n    document.body.appendChild(auxiliaryBlock);\r\n    const scrollWidth = auxiliaryBlock.offsetWidth - auxiliaryBlock.clientWidth;\r\n    auxiliaryBlock.remove();\r\n\r\n    return scrollWidth;\r\n  }\r\n\r\n  //* Метод открытия попапа и блокировки скролла страницы\r\n  open() {\r\n    const scrollWidth = this._calcScrollWidth();\r\n    document.addEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.add(\"popup_opened\");\r\n    document.body.style.overflow = \"hidden\";\r\n\r\n    //* Добавление границы с шириной равной ширине скролла\r\n    document.body.style.borderRight = `${scrollWidth}px solid black`;\r\n  }\r\n\r\n  //* Метод закрытия попапа\r\n  close() {\r\n    document.removeEventListener(\"keyup\", this._handleEscClose);\r\n    this._popupElement.classList.remove(\"popup_opened\");\r\n    document.body.style.overflow = \"\";\r\n    document.body.style.borderRight = \"none\";\r\n  }\r\n\r\n  //* Метод закрытия на ESC\r\n  _handleEscClose(evt) {\r\n    if (evt.key === \"Escape\") {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  //* Установка слушателей\r\n  setEventListeners() {\r\n    this._popupCloseButton.addEventListener(\"click\", () => {\r\n      this.close();\r\n    });\r\n    this._popupOverlay.addEventListener(\"click\", () => {\r\n      if (this._popupElement.classList.contains(\"popup_opened\")) {\r\n        this.close();\r\n      }\r\n    });\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с формой\r\nexport default class PopupWithForm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._formSubmit = this._formSubmit.bind(this);\r\n    this._form = this._popupElement.querySelector(\".popup__form\");\r\n    this._inputs = Array.from(this._form.querySelectorAll(\".popup__input\"));\r\n    this._submitButton = this._form.querySelector(\".popup__button\");\r\n  }\r\n\r\n  //* Сабмит формы\r\n  _formSubmit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this._getInputValues(), this._submitButton);\r\n  }\r\n\r\n  //* Метод сбора данных со всех полей формы\r\n  _getInputValues() {\r\n    const data = {};\r\n    this._inputs.forEach(input => {\r\n      data[input.name] = input.value;\r\n    });\r\n    return data;\r\n  }\r\n\r\n  //* Перезапись родительского метода закрытия попапа\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n\r\n  //* Перезапись родительского метода установки слушателей\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener(\"submit\", this._formSubmit);\r\n  }\r\n}\r\n","import Popup from \"./Popup.js\";\r\n\r\n//* Класс попапа с картинкой\r\nexport default class PopupWithImage extends Popup {\r\n  constructor(popupElement) {\r\n    super(popupElement);\r\n    this._image = this._popupElement.querySelector(\".popup__image\");\r\n    this._imageSubtitle = this._popupElement.querySelector(\r\n      \".popup__image-subtitle\"\r\n    );\r\n  }\r\n\r\n  //* Перезапись родительского метода\r\n  open(data) {\r\n    super.open();\r\n    this._image.src = data.image;\r\n    this._image.alt = data.text;\r\n    this._imageSubtitle.textContent = `${data.text}`;\r\n  }\r\n}\r\n","import Popup from './Popup.js'\r\n\r\nexport default class PopupConfirm extends Popup {\r\n  constructor(popupElement, { formSubmitCallBack }) {\r\n    super(popupElement);\r\n    this._formSubmitCallBack = formSubmitCallBack;\r\n    this._form = this._popupElement.querySelector('.popup__form');\r\n    this._submit = this._submit.bind(this);\r\n  }\r\n\r\n  _submit(evt) {\r\n    evt.preventDefault();\r\n    this._formSubmitCallBack(this.data);\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._form.addEventListener('submit', this._submit);\r\n  }\r\n}","//* Класс для взаимодействия с сервером\r\nexport default class Api {\r\n  constructor(data) {\r\n    this._baseUrl = data.serverUrl;\r\n    this._token = data.token;\r\n  }\r\n\r\n  //* Проверка статуса запроса\r\n  _requestResult(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Что-то пошло не так: Ошибка ${res.status} - ${res.statusText}`);\r\n    }\r\n  }\r\n\r\n  //* Запрос данных пользователя\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос изначальных карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  editAvatar(data) {\r\n    return fetch(`${this._baseUrl}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: data.avatar\r\n      })\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на редактирование данных пользователя\r\n  editProfile(data) {\r\n    return fetch(`${this._baseUrl}users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.job\r\n      })\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на добавление карточки\r\n  addNewCard(data) {\r\n    return fetch(`${this._baseUrl}cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link,\r\n      })\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на удаление карточки\r\n  deleteCard(data) {\r\n    return fetch(`${this._baseUrl}cards/${data}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на добавление лайка карточке\r\n  addCardLike(data) {\r\n    return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n\r\n  //* Запрос на удаление лайка карточки\r\n  deleteCardLike(data) {\r\n    return fetch(`${this._baseUrl}cards/likes/${data}`, {\r\n      method: 'DELETE', \r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n    .then((res) => this._requestResult(res))\r\n  }\r\n}","//* Данные для валидации форм\r\nexport const enableValidation = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  inputError: \".popup__input-error\",\r\n  errorClass: \"popup__input-error_visible\",\r\n};\r\n\r\n//* Основные константы\r\nexport const profileName = document.querySelector(\".profile__name\");\r\nexport const profileJob = document.querySelector(\".profile__job\");\r\nexport const profileAvatar = document.querySelector(\".profile__avatar\");\r\n\r\nexport const profileEditButton = document.querySelector(\r\n  \".profile__edit-button\"\r\n);\r\nexport const profileAvatarEditButton = document.querySelector(\".profile__avatar-edit-button\");\r\nexport const avatarEditPopup = document.querySelector(\"#update\");\r\nexport const cardDeletePopup = document.querySelector(\"#confirm\");\r\nexport const editProfilePopup = document.querySelector(\"#editProfile\");\r\nexport const editProfilePopupForm = editProfilePopup.querySelector(\r\n  \".popup__form\"\r\n);\r\nexport const editProfileNameInput = editProfilePopupForm.querySelector(\r\n  \"#popup__name-input\"\r\n);\r\nexport const editProfileJobInput = editProfilePopupForm.querySelector(\r\n  \"#popup__job-input\"\r\n);\r\n\r\nexport const profileAddButton = document.querySelector(\".profile__add-button\");\r\nexport const addCardPopup = document.querySelector(\"#addCard\");\r\n\r\nexport const openPicturePopup = document.querySelector(\"#openPicture\");\r\n\r\nexport const elementsList = document.querySelector(\".elements__list\");\r\n\r\nexport const spinner = document.querySelector('.spinner');\r\n","import \"./index.css\";\r\n\r\nimport { FormValidator } from \"../scripts/components/FormValidator.js\";\r\nimport Section from \"../scripts/components/Section.js\";\r\nimport { Card } from \"../scripts/components/Card.js\";\r\nimport UserInfo from \"../scripts/components/UserInfo.js\";\r\nimport PopupWithForm from \"../scripts/components/PopupWithForm.js\";\r\nimport PopupWithImage from \"../scripts/components/PopupWithImage.js\";\r\nimport PopupConfirm from \"../scripts/components/PopoupConfirm\";\r\nimport Api from \"../scripts/components/Api.js\";\r\nimport {\r\n  editProfilePopup,\r\n  avatarEditPopup,\r\n  profileEditButton,\r\n  profileAvatarEditButton,\r\n  addCardPopup,\r\n  cardDeletePopup,\r\n  profileJob,\r\n  profileName,\r\n  profileAvatar,\r\n  elementsList,\r\n  openPicturePopup,\r\n  editProfileNameInput,\r\n  editProfileJobInput,\r\n  enableValidation,\r\n  profileAddButton,\r\n  spinner,\r\n} from \"../scripts/utils/constants.js\";\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  const api = new Api({\r\n    serverUrl: \"https://mesto.nomoreparties.co/v1/cohort-19/\",\r\n    token: \"4fc24223-fbb6-4e5b-bedd-d51fcb2b9911\",\r\n  });\r\n\r\n  //* Переменная с id пользователя и лайки\r\n  let userId, addCardLike, deleteCardLike;\r\n\r\n  const initialData = [api.getUserInfo(), api.getInitialCards()];\r\n\r\n  //* Запрос данных сервера для превой отрисовки страницы\r\n  Promise.all(initialData)\r\n    .then((res) => {\r\n      // console.log(res);\r\n      const userData = res[0]; //* Объект с данными пользователя\r\n      // console.log(userData);\r\n      userId = userData._id;\r\n      userInfo.setUserInfo(userData);\r\n      userInfo.setUserAvatar(userData);\r\n      section.renderItems(res[1].reverse());\r\n    })\r\n    .catch((err) => console.log(err));\r\n\r\n  //* Попап с фото\r\n  const popupWithImage = new PopupWithImage(openPicturePopup);\r\n  popupWithImage.setEventListeners();\r\n\r\n  //* Открытие попапа с фото\r\n  const openImagePopup = (evt) => {\r\n    const data = {\r\n      image: evt.target.src,\r\n      text: evt.target\r\n        .closest(\".elements__list-item\")\r\n        .querySelector(\".elements__text\").textContent,\r\n    };\r\n    popupWithImage.open(data);\r\n  };\r\n\r\n  const deleteCard = (data) => {\r\n    deleteCardPopup.data = data;\r\n    deleteCardPopup.open();\r\n  };\r\n\r\n  //* Создание карточки\r\n  const createCard = (data) => {\r\n    const card = new Card(\r\n      data,\r\n      \".cardTemplate\",\r\n      userId,\r\n      openImagePopup,\r\n      deleteCard,\r\n      (addCardLike = (data) => {\r\n        return api.addCardLike(data);\r\n      }),\r\n      (deleteCardLike = (data) => {\r\n        return api.deleteCardLike(data);\r\n      })\r\n    );\r\n    const cardElement = card.createCardElement(data);\r\n    return cardElement;\r\n  };\r\n\r\n  //* Попап удаления карточки\r\n  const deleteCardPopup = new PopupConfirm(cardDeletePopup, {\r\n    formSubmitCallBack: (data) => {\r\n      api\r\n        .deleteCard(data.cardId)\r\n        .then(() => {\r\n          data.card.remove();\r\n          deleteCardPopup.close();\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  });\r\n  deleteCardPopup.setEventListeners();\r\n\r\n  //* Генерация карточек\r\n  const section = new Section(\r\n    {\r\n      renderItems: (data) => {\r\n        section.addItem(createCard(data));\r\n      },\r\n    },\r\n    elementsList\r\n  );\r\n\r\n  //* Попап редактирования профиля\r\n  const userInfo = new UserInfo({ profileName, profileJob, profileAvatar });\r\n\r\n  const editPopup = new PopupWithForm(editProfilePopup, {\r\n    formSubmitCallBack: (data, button) => {\r\n      button.textContent = \"Сохранение\";\r\n      button.append(spinner);\r\n      api\r\n        .editProfile(data)\r\n        .then((res) => {\r\n          userInfo.setUserInfo(res);\r\n          editPopup.close();\r\n        })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          button.textContent = \"Сохранить\";\r\n        });\r\n    },\r\n  });\r\n  editPopup.setEventListeners();\r\n\r\n  //* Попап редактирования аватарки\r\n  const avatarEdit = new PopupWithForm(avatarEditPopup, {\r\n    formSubmitCallBack: (data, button) => {\r\n      button.textContent = \"Сохранение\";\r\n      button.append(spinner);\r\n      api\r\n        .editAvatar(data)\r\n        .then((res) => {\r\n          userInfo.setUserAvatar(res);\r\n          avatarEdit.close();\r\n        })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          button.textContent = \"Сохранить\";\r\n        });\r\n    },\r\n  });\r\n  avatarEdit.setEventListeners();\r\n\r\n  //* Попап добавления карточки\r\n  const addNewCardPopup = new PopupWithForm(addCardPopup, {\r\n    formSubmitCallBack: (data, button) => {\r\n      button.textContent = \"Сохранение\";\r\n      button.append(spinner);\r\n      const item = {\r\n        name: data.placeName,\r\n        link: data.placeLink,\r\n      };\r\n      api\r\n        .addNewCard(item)\r\n        .then((res) => {\r\n          section.addItem(createCard(res), true);\r\n          addNewCardPopup.close();\r\n        })\r\n        .catch((err) => console.log(err))\r\n        .finally(() => {\r\n          button.textContent = \"Сохранить\";\r\n        });\r\n    },\r\n  });\r\n  addNewCardPopup.setEventListeners();\r\n\r\n  //* Создание классов валидации\r\n  const editPopupValidation = new FormValidator(\r\n      enableValidation,\r\n      editProfilePopup\r\n    ),\r\n    addPopupValidation = new FormValidator(enableValidation, addCardPopup),\r\n    avatarEditPopopValidation = new FormValidator(\r\n      enableValidation,\r\n      avatarEditPopup\r\n    );\r\n\r\n  //* Активация валидации\r\n  editPopupValidation.enableValidation();\r\n  addPopupValidation.enableValidation();\r\n  avatarEditPopopValidation.enableValidation();\r\n\r\n  //* Установка слушателей\r\n  profileEditButton.addEventListener(\"click\", () => {\r\n    const data = userInfo.getUserInfo();\r\n    editProfileNameInput.value = data.name;\r\n    editProfileJobInput.value = data.job;\r\n    editPopupValidation.hideAllErrors();\r\n    editPopup.open();\r\n    profileEditButton.blur();\r\n  });\r\n  profileAddButton.addEventListener(\"click\", () => {\r\n    addNewCardPopup.open();\r\n    profileAddButton.blur();\r\n    addPopupValidation.hideAllErrors();\r\n  });\r\n  profileAvatarEditButton.addEventListener(\"click\", () => {\r\n    avatarEdit.open();\r\n    profileAvatarEditButton.blur();\r\n    avatarEditPopopValidation.hideAllErrors();\r\n  });\r\n});\r\n"],"sourceRoot":""}